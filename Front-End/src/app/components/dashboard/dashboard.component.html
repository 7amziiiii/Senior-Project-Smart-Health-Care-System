<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <h2><i class="fas fa-hospital"></i> OR Management</h2>
    </div>
    <div class="header-right">
      <a *ngIf="isAdmin" routerLink="/admin" class="admin-btn">
        <i class="fas fa-user-shield"></i>
        <span>Admin</span>
      </a>
      <button class="logout-btn" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </div>
  </div>
  
  <div class="dashboard-content">
    <!-- SURGERY SELECTION VIEW -->
    <div *ngIf="!showFeatures" class="operations-view">
      <div class="view-header">
        <div class="view-title">
          <h3>OR Operations</h3>
        </div>
        <div class="view-actions">
          <div class="search-bar">
            <input type="text" placeholder="Search surgeries..." [(ngModel)]="searchTerm" />
            <i class="fas fa-search"></i>
          </div>
        </div>
      </div>
      
      <!-- ONGOING SURGERIES -->
      <div class="operations-section">
        <div class="section-header">
          <div class="section-title">
            <h4>ACTIVE OPERATIONS</h4>
          </div>
          <span class="operation-count">{{ ongoingSurgeries.length || 0 }}</span>
        </div>
        
        <div class="operations-list">
          <div *ngIf="ongoingSurgeries.length === 0" class="no-data-message">
            <p>No active operations</p>
          </div>
          
          <div *ngFor="let surgery of ongoingSurgeries | surgeryFilter:searchTerm" 
               class="operation-row active"
               (click)="selectSurgery(surgery)">
            <div class="operation-info">
              <div class="operation-name">{{ surgery.name }}</div>
              <div class="operation-details">
                <span class="detail"><i class="far fa-clock"></i> {{ surgery.scheduledTime | date:'h:mm a' }}</span>
                <span class="detail"><i class="fas fa-map-marker-alt"></i> Room {{ surgery.roomNumber || '?' }}</span>
              </div>
            </div>
            <div class="operation-actions">
              <button class="select-btn">Select</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- SCHEDULED SURGERIES -->
      <div class="operations-section">
        <div class="section-header">
          <div class="section-title">
            <h4>SCHEDULED OPERATIONS</h4>
          </div>
          <span class="operation-count">{{ upcomingSurgeries.length || 0 }}</span>
        </div>
        
        <div class="operations-list">
          <div *ngIf="upcomingSurgeries.length === 0" class="no-data-message">
            <p>No scheduled operations</p>
          </div>
          
          <div *ngFor="let surgery of upcomingSurgeries | surgeryFilter:searchTerm" 
               class="operation-row scheduled"
               (click)="selectSurgery(surgery)">
            <div class="operation-info">
              <div class="operation-name">{{ surgery.name }}</div>
              <div class="operation-details">
                <span class="detail"><i class="far fa-clock"></i> {{ surgery.scheduledTime | date:'h:mm a' }}</span>
                <span class="detail"><i class="fas fa-map-marker-alt"></i> Room {{ surgery.roomNumber || '?' }}</span>
              </div>
            </div>
            <div class="operation-actions">
              <button class="select-btn">Select</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- FEATURE SELECTION VIEW -->
    <div *ngIf="showFeatures" class="features-view">
      <div class="view-header">
        <div class="view-title">
          <div class="surgery-info">
            <h3>{{ selectedSurgery?.name }}</h3>
            <div class="surgery-meta">
              <span class="meta-item">{{ selectedSurgery?.scheduledTime | date:'MMM d, y â€¢ h:mm a' }}</span>
              <span class="meta-item">Room {{ selectedSurgery?.roomNumber || '?' }}</span>
            </div>
          </div>
        </div>
        <div class="view-actions">
          <button class="back-btn" (click)="showFeatures = false; selectedSurgery = null;">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
          </button>
        </div>
      </div>
      
      <div class="tools-panel">
        <!-- Instruments Verification Tool -->
        <div class="tool-item" (click)="navigateToFeature('instruments-verification')">
          <div class="tool-icon">
            <i class="fas fa-tools"></i>
          </div>
          <div class="tool-label">Instruments Verification</div>
        </div>
        
        <!-- Outbound Tracking Tool -->
        <div class="tool-item" (click)="navigateToFeature('outbound-tracking')">
          <div class="tool-icon">
            <i class="fas fa-truck-loading"></i>
          </div>
          <div class="tool-label">Outbound Tracking</div>
        </div>
        
        <!-- Equipment Tracking Tool -->
        <div class="tool-item" (click)="navigateToFeature('equipment-tracking')">
          <div class="tool-icon">
            <i class="fas fa-laptop-medical"></i>
          </div>
          <div class="tool-label">Equipment Tracking</div>
        </div>
        
        <!-- Predictive Maintenance Tool -->
        <div class="tool-item" (click)="navigateToFeature('maintenance')">
          <div class="tool-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="tool-label">Predictive Maintenance</div>
        </div>
      </div>
    </div>
  </div>
</div>
